<mat-card class="card">
	<mat-card-header>
		<div mat-card-avatar class="header-image" [style]="'background-image: url(' + images.avatar + ');'"></div>
		<mat-card-title i18n="Title of podcast">Medabrim Shlichut</mat-card-title>
		<mat-card-subtitle i18n="Listen page - Author of podcast">by Asi Aharonov PhD.</mat-card-subtitle>
	</mat-card-header>
	<img mat-card-image [src]="images.listenBack" alt="Photo of Asi Aharonov" class="main-image">

	<mat-form-field class="example-form-field">
		<mat-label i18n="Search bar label">Search Episodes</mat-label>
		<input matInput type="text" [(ngModel)]="searchString" (keyup)="search()">
		<button mat-button *ngIf="searchString" matSuffix mat-icon-button aria-label="Clear" (click)="clearSearch()">
			<mat-icon>close</mat-icon>
		</button>
		<button mat-button *ngIf="!searchString" matSuffix mat-icon-button aria-label="Search">
			<mat-icon>search</mat-icon>
		</button>
	</mat-form-field>

	<mat-card-content *ngIf="episodes">
		<mat-accordion>
			<mat-expansion-panel style="margin-bottom:3rem;" *ngFor="let episode of episodes" hideToggle (opened)="toggleEpisodeOpen(episode)" (closed)="toggleEpisodeOpen(episode)">
				<mat-expansion-panel-header class="height-free user-select-none">
					<mat-panel-title style="margin-top:2rem;margin-bottom:1rem;" *ngIf="!episode.open" class="expansion-header expansion-header-full title-hide">
						{{ episode.title }}
					</mat-panel-title>
				</mat-expansion-panel-header>
				<mat-expansion-panel-header style="display:flex;justify-content:space-between;" class="height-free user-select-none">
					<a mat-icon-button href="{{ episode.track }}" target="_blank" download>
						<mat-icon>get_app</mat-icon>
					</a>
					<button mat-icon-button (click)="playEpisode(episode)">
						<mat-icon>play_arrow</mat-icon>
					</button>
					<mat-panel-description style="flex:1;" class="expansion-header title-hide" [class.expansion-header-semi]="!episode.open" [class.expansion-header-full]="episode.open">
						{{ formatSeconds(episode.duration) }} - {{ formatTimeAgo(episode.date) }}
					</mat-panel-description>
				</mat-expansion-panel-header>
				<p class="description"><strong>{{ episode.title }}</strong> - {{ formatTime(episode.date) }}</p>
				<p class="description" [innerHTML]="episode.description"></p>
			</mat-expansion-panel>
		</mat-accordion>
	</mat-card-content>

</mat-card>